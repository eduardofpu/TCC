
<div class="jumbotron">

  <div class="container">
      <div class="row">
          <div class="col-md-7 col-md-offset-3">
              <div class="login-panel panel panel-default">
                  <div class="panel-heading">
                      <h3 class="panel-title">Prestador de serviço</h3>
                  </div>
                  <div class="panel-body">

                    <button type="button" ng-hide="showAddEditUser"  ng-click="show()" class="btn  btn-primary  btn-lg  aw-btn-full-width">
                            Novo Prestador
                         </button>

        <button type="button" value="Voltar" onClick="history.go(-1)" class="btn btn-warning btn-lg  aw-btn-full-width">Voltar
          <span  class="glyphicon glyphicon-hand-left" aria-hidden="true"></span>

        </button>


<!-- Modal Dialog -->
 <div class="modal fade" id="confirmSave" role="dialog" aria-labelledby="confirmDeleteLabel" aria-hidden="true">
         <div class="modal-dialog">
           <div class="modal-content">
            <div class="modal-header">
               <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
                   <h4 class="modal-title">Salvar Prestador de serviço</h4>
                  </div>
                    <div class="modal-body">
                   <p>Deseja Salvar ?</p>
                     </div>
                     <div class="modal-footer">
                     <button type="button" class="btn btn-default" data-dismiss="modal">Cancel</button>
                   <button type="button" class="btn btn-danger" data-dismiss="modal" id="confirm" ng-click="saveFile(p)">Salvar</button>
                 </div>
               </div>
           </div>
   </div>



   <form  ng-hide="!showAddEditUser" name="form1">

     <!-- onblur="BuscaCEP(this.value)"  -->
     <div ng-messages="form1.cep.$dirty && myForm.cep.$error">
         <div ng-message="required" class="alert alert-danger" role="alert">Campo não pode ser vazio.</div>
         <div ng-message="minlength" class="alert alert-danger" role="alert">Deve ser acima de 5 caracteres</div>
         <div ng-message="maxlength" class="alert alert-danger" role="alert">Deve possuir menos que 20 caracteres</div>
         <div class="alert alert-danger" ng-class='{"invisible": !resCep}' role="alert">
           Ocorreu um erro inesperado, verifique se os dados digitados estão corretos.
         </div>
       </div>


<div ng-show="form1.cidade.$dirty" >
   <div  ng-show="form1.cidade.$error.required" class="alert alert-danger" role="alert">Campo cidade obrigatório </div>
     </div>

     <div ng-show="form1.uf.$dirty" >
                   <div  ng-show="form1.uf.$error.required" class="alert alert-danger" role="alert">Campo uf obrigatório </div>
                 </div>


     <div ng-show="form1.bairro.$dirty" >
                   <div  ng-show="form1.bairro.$error.required" class="alert alert-danger" role="alert">Campo bairro obrigatório </div>
                 </div>


     <div ng-show="form1.endereco.$dirty" >
                   <div  ng-show="form1.endereco.$error.required" class="alert alert-danger" role="alert">Campo ENDEREÇO obrigatório </div>
                 </div>


     <div ng-show="form1.numero.$dirty" >
                   <div  ng-show="form1.numero.$error.required" class="alert alert-danger" role="alert">Campo número obrigatório </div>



     </div>


     <div ng-show="form1.complemento.$dirty" >
                   <div  ng-show="form1.complemento.$error.required" class="alert alert-danger" role="alert">Campo complemento obrigatório </div>
                 </div>







                           <!--
                             <div class="form-group">
                               <div  ng-class="{'has-error': form1.cep$invalid ,'has-success': form1.cep.$valid}">
                                <label>Cep</label>
                               <input  class="form-control "placeholder="CEP" ng-model="p.cep" type="text" style="width: 100px" for="cep" id="cep"  name="cep"
                                ng-blur="buscarCep(p.cep)"  >
                               </div>
                               </div>
                             -->


                             <div class="row">
                               <div class="col-md-3">
                                 <div class="input-group">

                                   <input type="text" class="form-control" name="cep" ng-model="p.cep" ng-minlength="5" ng-maxlength="20"
                                    placeholder="Digite o CEP" autofocus required  ng-blur="buscarCep(p.cep)">

                                   <span class="input-group-btn"  >
                                         <a class="btn btn-success"   >
                                           <span class="glyphicon glyphicon-search" aria-hidden="true"  ng-click="buscarCep(p.cep)"></span>
                                   </a>
                                   </span>
                                 </div>
                               </div>
                               <div class="col-md-9"></div>
                             </div>





                           <!---

                           <div ng-show="form1.cep.$dirty" class="alert alert-danger" role="alert" ng-class='{"invisible": !resCep}'>
                                    <div  ng-show="form1.cep.$error.required" >Campo CEP obrigatório </div>
                                  </div>

                           -->





                           <div class="row">
                                       <div class="col-md-4"  ng-class="{'has-error': form1.cidade$invalid ,'has-success': form1.cidade.$valid}" >
                                         <label>Localidade</label>
                                         <input class="form-control" ng-model="p.localidade" id="cidade" name="cidade" required>
                                       </div>



                                       <div class="col-md-1" ng-class="{'has-error': form1.uf$invalid ,'has-success': form1.uf.$valid}">
                                         <label>UF</label>
                                         <input class="form-control" ng-model="p.uf" id="uf" name="uf" required>
                                       </div>


                                       <div class="col-md-3" ng-class="{'has-error': form1.bairro$invalid ,'has-success': form1.bairro.$valid}">
                                         <label>Bairro</label>
                                         <input class="form-control" ng-model="p.bairro" id="bairro" name="bairro" required>
                                       </div>


                                       <div class="col-md-4" ng-class="{'has-error': form1.endereco$invalid ,'has-success': form1.endereco.$valid}">
                                         <label>Logradouro</label>
                                         <input class="form-control" ng-model="p.logradouro" id="endereco" name="endereco" required>
                                       </div>

                                       <div class="col-md-3" ng-class="{'has-error': form1.numero$invalid ,'has-success': form1.numero.$valid}">
                                         <label>Numero</label>
                                         <input class="form-control" ng-model="p.numero" name="numero" required>
                                       </div>




                                       <div class="col-md-5" ng-class="{'has-error': form1.complemento$invalid ,'has-success': form1.complemento.$valid}">
                                         <label>Complemento</label>
                                         <input class="form-control" ng-model="p.complemento" name="complemento" required>
                                       </div>




                                     </div>



                                   <br>



                                           <center  ><img ng-src="{{p.mimeType}},{{p.file}}"
                                                 width="100" class="img-circle img80_80" /></center>


                                       <br />

                         <div>

                              Selecione uma Imagem:
                                    <br />
                                            <!--id="myFile"--> <!--ng-hide="showAddEditformulario" ng-click="show()"-->
                                                  <input type="file" class="btn btn-danger btn-xs"   ng-model="p.file" accept="image/*"
                                                          multiple app-filereader ng-change="updateLinkImage(p.file[0])" />

                                                     <br />

                                         </div>

                               <div class="form-group">
                                 <div ng-class="{'has-error': form1.nome$touched && (form1.nome.$error.required) , 'has-success':form1.nome.$valid}">

                                     <label>NOME PRESTADOR DE SERVIÇO</label>
                                        <input class="form-control" type="text" placeholder="Nome" ng-model="p.prestador" name="nome" required>
                                 </div>
                         </div>


                           <div ng-show="form1.nome.$dirty" >
                                <div  ng-show="form1.nome.$error.required" class="alert alert-danger" role="alert">Campo Nome é obrigatório </div>

                            </div>




                                 <div class="form-group input-group">
                                                                 <span class="input-group-addon">@</span>
                                   <div class="form-group" ng-class="{'has-error': form1.email.$invalid ,'has-success': form1.email.$valid}">

                                   <input for="email" name="email"  class="form-control"   type="email" placeholder="Email" ng-model="p.email"
                                    autofocus required >
                                  </div>
                                 </div>

                                  <div ng-show="form1.email.$dirty" >
                                       <div  ng-show="form1.email.$error.required" class="alert alert-danger" role="alert">Campo Email é obrigatório </div>
                                          <div  ng-show="form1.email.$error.email" class="alert alert-danger" role="alert">Email inválido </div>

                                        </div>





                                 <div class="form-group">
                                   <div ng-class="{'has-error': form1.tel$touched && (form1.tel.$error.required || form1.tel.$error.minlength) ,
                                       'has-success':form1.tel.$valid}">
                                   <label>FONE</label>
                                        <input  name="tel" ng-minlength=13  maxlength="13" class="form-control"  type="text" placeholder="(34)3222-4011"
                                       mask="(00)0000-0000"   ng-model="p.fone" required>

                                       <span ng-show="form1.tel.$touched && form1.tel.$error.minlength" class="label label-danger">
                                         * TELEFONE : Iválido   faltam {{13- form1.tel.$viewValue.length}}    Nº(s) </span>
                                </div>
                           </div>





                              <div class="form-group" >

                                     <label>
                                        <img ng-src="resources/images/CPF.jpg" width="70" class="img img585_585" />
                                       </label>
                                    <font color="#B03060"> <h4 ng-bind="p.cpf"></h4></font>

                                </div>




                             <div class="form-group">

                                     <label>RG</label>  <font color="#B03060"> <h4 ng-bind="p.rg"></h4></font>

                             </div>


                                 <div class="form-group">
                                   <div ng-class="{'has-error': form1.empresa$touched && (form1.empresa.$error.required) , 'has-success':form1.empresa.$valid}">

                                    <label>EMPRESA</label>
                                        <input class="form-control" type="text" placeholder="Empresa" ng-model="p.empresa" name="empresa" required>
                                 </div>
                                 </div>
                                 <div ng-show="form1.empresa.$dirty" >
                                      <div  ng-show="form1.empresa.$error.required" class="alert alert-danger" role="alert">Campo Empresa é obrigatório </div>

                                  </div>


                                 <div class="form-group">
                                   <div ng-class="{'has-error': form1.funcao$touched && (form1.funcao.$error.required) , 'has-success':form1.funcao.$valid}">

                                      <label>Função</label>

                                        <input class="form-control" type="text" placeholder="Função" ng-model="p.funcao" name="funcao" required>
                                 </div>
                                 </div>
                                 <div ng-show="form1.funcao.$dirty" >
                                      <div  ng-show="form1.funcao.$error.required" class="alert alert-danger" role="alert">Campo Funcão é obrigatório </div>

                                  </div>



                                                  <!--<pre >{{p | json}}</pre>-->



                                  <!--onclick="myFunction()"--> <!--ng-hide="!showAddEditformulario"   ng-disabled="form1.$invalid" -->

                                  <button ng-disabled="form1.$invalid"  class="btn btn-success btn-s" data-toggle="modal" data-target="#confirmSave" data-title="Delete User" data-message="Are you sure you want to delete this user ?" >
                                                 <span class="glyphicon glyphicon-upload">  Salvar</button>





                                             <button type="reset"  class="btn btn-danger btn-s">
                                          <span class="glyphicon glyphicon-trash"></span>Limpar Nome</button>
                                      <button type="button" class="btn btn-success btn-s"  ng-click="hide()">Voltar</button>




                         </form>



  <!--<pre>{{ap|json}}</pre>-->


<br><br>

  <div class="row">
                    <div class="col-lg-50">
                      <div class="table-responsive" ng-hide="showAddEditUser">
                            <table class="table table-bordered table-hover table-striped">

                              <div class="blocktext">

                                <div >

                                 <div class="form-group input-group">

                                <input type="text" class="form-control"  ng-model="busca"
                                 placeholder="Pesquise uma Descricao: " size="30"	maxlength="30" />
                                 <span class="input-group-addon"><i class="fa fa-search"></i></span>


                                   </div>
                                 </div>
                                </div>


                             <br/>
                             <thead>
                                       <tr>
                                       <th>Nome</th>
                                       <th>Email</th>
                                       <th>Fone</th>

                                       <!--

                                       <th>CPF</th>
                                       <th>RG</th>
                                       -->

                                       <th>Empresa</th>
                                       <th>Função</th>

                                       <th>CIDADE</th>
                                       <th>BAIRRO</th>
                                       <th>UF</th>
                                       <!--
                                       <th>NUMERO</th>
                                        <th>CEP</th>
                                       <th>ENDEREÇO</th>
                                       <th>COMPLEMENTO</th>
                                       <th>MIMETYPE</th>

                                       -->
                                       <th>Editar</th>
                                       <th>Deletar</th>
                                         </tr>
                                   </thead>
                             <tbody>
                               <!--  ng-hide="showAddEditformulario" ng-hide="!showTable" ng-click="show()" -->
                               <!--<tr ng-repeat="fileupload in fileuploads|filter:busca|orderBy:'prestador'" class="active">-->

                                 <tr dir-paginate="p in ps|filter:busca|filter:busca|orderBy:'prestador' |orderBy:sortKey:reverse|itemsPerPage:4">


                                 <td>{{ p.prestador }}</td>
                                 <td>{{p.email }}</td>
                                 <td>{{ p.fone }}</td>

                                 <!--

                                 <td>{{p.cpf }}</td>
                                   <td>{{ p.rg }}</td>
                               -->

                                 <td>{{ p.empresa }}</td>
                                 <td>{{ p.funcao }}</td>
                                 <td>{{p.localidade }}</td>
                                 <td>{{p.bairro }}</td>
                                 <td>{{ p.uf }}</td>
                                 <!--
                                  <td>{{ p.numero }}</td>
                                 <td>{{p.cep }}</td>
                                 <td>{{ p.logradouro }}</td>
                                 <td>{{ p.complemento }}</td>

                                  <td> <img ng-src="{{p.mimeType}},{{p.file}}" width="50" /></td>
                                -->

             <td><button ng-click="editFile(p)" class="btn btn-success btn-s"><span class="glyphicon glyphicon-ok"></span></button></td>

         <td>


                   <div class="modal fade" id="confirmDelete" role="dialog" aria-labelledby="confirmDeleteLabel" aria-hidden="true">
                     <div class="modal-dialog">
                       <div class="modal-content">
                         <div class="modal-header">
                           <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
                           <h4 class="modal-title">Prestador de Serviço</h4>
                         </div>
                         <div class="modal-body">
                           <p>Deseja deletar este Prestador de serviço ?</p>
                         </div>
                         <div class="modal-footer">
                           <button type="button" class="btn btn-default" data-dismiss="modal">Cancel</button>
                           <button type="button" class="btn btn-danger" data-dismiss="modal" id="confirm" >Delete</button>
                         </div>
                       </div>
                     </div>
                   </div>

     <button   class="btn btn-danger btn-s" data-toggle="modal"data-target="#confirmDelete" data-title="Delete User" ng-blur="deleteFile(p)">
     <span class="glyphicon glyphicon-trash"></span></button>
         </td>

     </tr>
    </tbody>
  </table>
    <dir-pagination-controls max-size="4" boundary-links="true"></dir-pagination-controls>

  </div>
</div>
